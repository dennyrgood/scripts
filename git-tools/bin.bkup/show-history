#!/bin/bash

# Helper function to show and run git commands
run_git() {
    echo "üìç Running: git $@"
    git "$@"
    local result=$?
    echo ""
    return $result
}

if [ -z "$1" ]; then
    echo "Usage: show-history <filename>"
    echo "Example: show-history sync-this.sh"
    exit 1
fi

FILENAME="$1"

echo "=== Complete history of: $FILENAME ==="
echo "(Including deleted versions)"
echo ""
run_git log --all --full-history --follow --pretty=format:"%h | %ad | %s" --date=short -- "$FILENAME"
echo ""
echo ""
echo "Tip: Use 'get-previous $FILENAME' to recover an old version"
